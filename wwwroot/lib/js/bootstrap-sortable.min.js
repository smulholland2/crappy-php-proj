!function(t,e){"use strict";function a(){return e}"function"==typeof define&&define.amd?define("tinysort",a):t.tinysort=e}(this,function(){"use strict";function t(t,r){function i(){0===arguments.length?g({}):e(arguments,function(t){g(A(t)?{selector:t}:t)}),h=H.length}function g(t){var e=!!t.selector,r=e&&":"===t.selector[0],o=a(t||{},m);H.push(a({hasSelector:e,hasAttr:!(o.attr===s||""===o.attr),hasData:o.data!==s,hasFilter:r,sortReturnNumber:"asc"===o.order?1:-1},o))}function b(){e(t,function(t,e){D?D!==t.parentNode&&(R=!1):D=t.parentNode;var a=H[0],r=a.hasFilter,o=a.selector,n=!o||r&&t.matchesSelector(o)||o&&t.querySelector(o),s=n?z:Y,i={elm:t,pos:e,posn:s.length};k.push(i),s.push(i)}),q=z.slice(0)}function y(t,e,a){for(var r=a(t.toString()),o=a(e.toString()),n=0;r[n]&&o[n];n++)if(r[n]!==o[n]){var s=Number(r[n]),i=Number(o[n]);return s==r[n]&&i==o[n]?s-i:r[n]>o[n]?1:-1}return r.length-o.length}function S(t){for(var e,a,r=[],o=0,n=-1,s=0;e=(a=t.charAt(o++)).charCodeAt(0);){var i=46==e||e>=48&&57>=e;i!==s&&(r[++n]="",s=i),r[n]+=a}return r}function w(t,a){var r=0;for(0!==p&&(p=0);0===r&&h>p;){var s=H[p],i=s.ignoreDashes?u:c;if(e(f,function(t){var e=t.prepare;e&&e(s)}),s.sortFunction)r=s.sortFunction(t,a);else if("rand"==s.order)r=Math.random()<.5?1:-1;else{var d=n,v=E(t,s),m=E(a,s),g=""===v||v===o,b=""===m||m===o;if(v===m)r=0;else if(s.emptyEnd&&(g||b))r=g&&b?0:g?1:-1;else{if(!s.forceStrings){var w=A(v)?v&&v.match(i):n,x=A(m)?m&&m.match(i):n;if(w&&x){var C=v.substr(0,v.length-w[0].length),N=m.substr(0,m.length-x[0].length);C==N&&(d=!n,v=l(w[0]),m=l(x[0]))}}r=v===o||m===o?0:s.natural&&(isNaN(v)||isNaN(m))?y(v,m,S):m>v?-1:v>m?1:0}}e(f,function(t){var e=t.sort;e&&(r=e(s,d,v,m,r))}),r*=s.sortReturnNumber,0===r&&p++}return 0===r&&(r=t.pos>a.pos?1:-1),r}function x(){var t=z.length===k.length;if(R&&t)j?z.forEach(function(t,e){t.elm.style.order=e}):D?D.appendChild(C()):console.warn("parentNode has been removed");else{var e=H[0],a=e.place,r="org"===a,o="start"===a,n="end"===a,s="first"===a,i="last"===a;if(r)z.forEach(N),z.forEach(function(t,e){F(q[e],t.elm)});else if(o||n){var d=q[o?0:q.length-1],l=d&&d.elm.parentNode,c=l&&(o&&l.firstChild||l.lastChild);c&&(c!==d.elm&&(d={elm:c}),N(d),n&&l.appendChild(d.ghost),F(d,C()))}else if(s||i){var u=q[s?0:q.length-1];F(N(u),C())}}}function C(){return z.forEach(function(t){M.appendChild(t.elm)}),M}function N(t){var e=t.elm,a=d.createElement("div");return t.ghost=a,e.parentNode.insertBefore(a,e),t}function F(t,e){var a=t.ghost,r=a.parentNode;r.insertBefore(e,a),r.removeChild(a),delete t.ghost}function E(t,e){var a,r=t.elm;return e.selector&&(e.hasFilter?r.matchesSelector(e.selector)||(r=s):r=r.querySelector(e.selector)),e.hasAttr?a=r.getAttribute(e.attr):e.useVal?a=r.value||r.getAttribute("value"):e.hasData?a=r.getAttribute("data-"+e.data):r&&(a=r.textContent),A(a)&&(e.cases||(a=a.toLowerCase()),a=a.replace(/\s+/g," ")),null===a&&(a=v),a}function A(t){return"string"==typeof t}A(t)&&(t=d.querySelectorAll(t)),0===t.length&&console.warn("No elements to sort");var q,D,M=d.createDocumentFragment(),k=[],z=[],Y=[],H=[],R=!0,B=t.length&&t[0].parentNode,L=B.rootNode!==document,j=t.length&&(r===o||r.useFlex!==!1)&&!L&&-1!==getComputedStyle(B,null).display.indexOf("flex");return i.apply(s,Array.prototype.slice.call(arguments,1)),b(),z.sort(w),x(),z.map(function(t){return t.elm})}function e(t,e){for(var a,r=t.length,o=r;o--;)a=r-o-1,e(t[a],a)}function a(t,e,a){for(var r in e)(a||t[r]===o)&&(t[r]=e[r]);return t}function r(t,e,a){f.push({prepare:t,sort:e,sortBy:a})}var o,n=!1,s=null,i=window,d=i.document,l=parseFloat,c=/(-?\d+\.?\d*)\s*$/g,u=/(\d+\.?\d*)\s*$/g,f=[],h=0,p=0,v=String.fromCharCode(4095),m={selector:s,order:"asc",attr:s,data:s,useVal:n,place:"org",returns:n,cases:n,natural:n,forceStrings:n,ignoreDashes:n,sortFunction:s,useFlex:n,emptyEnd:n};return i.Element&&function(t){t.matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=this,a=(e.parentNode||e.document).querySelectorAll(t),r=-1;a[++r]&&a[r]!=e;);return!!a[r]}}(Element.prototype),a(r,{loop:e}),a(t,{plugin:r,defaults:m})}()),function(t,e){"function"==typeof define&&define.amd?define(["jquery","tinysort","moment"],e):e(t.jQuery,t.tinysort,t.moment||void 0)}(this,function(t,e,a){function r(e){var r="undefined"!=typeof a;d=e.sign?e.sign:"arrow","default"==e.customSort&&(e.customSort=s),l=e.customSort||l||s,c=e.emptyEnd,t("table.sortable").each(function(){var o=t(this),s=e.applyLast===!0;o.find("span.sign").remove(),o.find("> thead [colspan]").each(function(){for(var e=parseFloat(t(this).attr("colspan")),a=1;e>a;a++)t(this).after('<th class="colspan-compensate">')}),o.find("> thead [rowspan]").each(function(){for(var e=t(this),a=parseFloat(e.attr("rowspan")),r=1;a>r;r++){var o=e.parent("tr"),n=o.next("tr"),s=o.children().index(e);n.children().eq(s).before('<th class="rowspan-compensate">')}}),o.find("> thead tr").each(function(e){t(this).find("th").each(function(a){var r=t(this);r.addClass("nosort").removeClass("up down"),r.attr("data-sortcolumn",a),r.attr("data-sortkey",a+"-"+e)})}),o.find("> thead .rowspan-compensate, .colspan-compensate").remove(),o.find("th").each(function(){var e=t(this);if(void 0!==e.attr("data-dateformat")&&r){var n=parseFloat(e.attr("data-sortcolumn"));o.find("td:nth-child("+(n+1)+")").each(function(){var r=t(this);r.attr("data-value",a(r.text(),e.attr("data-dateformat")).format("YYYY/MM/DD/HH/mm/ss"))})}else if(void 0!==e.attr("data-valueprovider")){var n=parseFloat(e.attr("data-sortcolumn"));o.find("td:nth-child("+(n+1)+")").each(function(){var a=t(this);a.attr("data-value",new RegExp(e.attr("data-valueprovider")).exec(a.text())[0])})}}),o.find("td").each(function(){var e=t(this);void 0!==e.attr("data-dateformat")&&r?e.attr("data-value",a(e.text(),e.attr("data-dateformat")).format("YYYY/MM/DD/HH/mm/ss")):void 0!==e.attr("data-valueprovider")?e.attr("data-value",new RegExp(e.attr("data-valueprovider")).exec(e.text())[0]):void 0===e.attr("data-value")&&e.attr("data-value",e.text())});var d=n(o),l=d.bsSort;o.find('> thead th[data-defaultsort!="disabled"]').each(function(e){var a=t(this),r=a.closest("table.sortable");a.data("sortTable",r);var o=a.attr("data-sortkey"),n=s?d.lastSort:-1;l[o]=s?l[o]:a.attr("data-defaultsort"),void 0!==l[o]&&s===(o===n)&&(l[o]="asc"===l[o]?"desc":"asc",i(a,r))})})}function o(e){var a=t(e),r=a.data("sortTable")||a.closest("table.sortable");i(a,r)}function n(e){var a=e.data("bootstrap-sortable-context");return void 0===a&&(a={bsSort:[],lastSort:void 0},e.find('> thead th[data-defaultsort!="disabled"]').each(function(e){var r=t(this),o=r.attr("data-sortkey");a.bsSort[o]=r.attr("data-defaultsort"),void 0!==a.bsSort[o]&&(a.lastSort=o)}),e.data("bootstrap-sortable-context",a)),a}function s(t,a){e(t,a)}function i(e,a){a.trigger("before-sort");var r=parseFloat(e.attr("data-sortcolumn")),o=n(a),s=o.bsSort,u=e.attr("colspan");if(u){var f=parseFloat(e.data("mainsort"))||0,h=parseFloat(e.data("sortkey").split("-").pop());if(a.find("> thead tr").length-1>h)return void i(a.find('[data-sortkey="'+(r+f)+"-"+(h+1)+'"]'),a);r+=f}var p=e.attr("data-defaultsign")||d;if(a.find("> thead th").each(function(){t(this).removeClass("up").removeClass("down").addClass("nosort")}),t.browser.mozilla){var v=a.find("> thead div.mozilla");void 0!==v&&(v.find(".sign").remove(),v.parent().html(v.html())),e.wrapInner('<div class="mozilla"></div>'),e.children().eq(0).append('<span class="sign '+p+'"></span>')}else a.find("> thead span.sign").remove(),e.append('<span class="sign '+p+'"></span>');var m=e.attr("data-sortkey"),g="desc"!==e.attr("data-firstsort")?"desc":"asc",b=s[m]||g;(o.lastSort===m||void 0===s[m])&&(b="asc"===b?"desc":"asc"),s[m]=b,o.lastSort=m,"desc"===s[m]?(e.find("span.sign").addClass("up"),e.addClass("up").removeClass("down nosort")):e.addClass("down").removeClass("up nosort");var y=a.children("tbody").children("tr"),S=[];t(y.filter('[data-disablesort="true"]').get().reverse()).each(function(e,a){var r=t(a);S.push({index:y.index(r),row:r}),r.remove()});var w=y.not('[data-disablesort="true"]');if(0!=w.length){var x="asc"===s[m]?c:!1;l(w,{emptyEnd:x,selector:"td:nth-child("+(r+1)+")",order:s[m],data:"value"})}t(S.reverse()).each(function(t,e){0===e.index?a.children("tbody").prepend(e.row):a.children("tbody").children("tr").eq(e.index-1).after(e.row)}),a.find("> tbody > tr > td.sorted,> thead th.sorted").removeClass("sorted"),w.find("td:eq("+r+")").addClass("sorted"),e.addClass("sorted"),a.trigger("sorted")}var d,l,c,u=t(document);if(t.bootstrapSortable=function(t){void 0==t?r({}):t.constructor===Boolean?r({applyLast:t}):void 0!==t.sortingHeader?o(t.sortingHeader):r(t)},u.on("click",'table.sortable>thead th[data-defaultsort!="disabled"]',function(t){o(this)}),!t.browser){t.browser={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1};var f=navigator.userAgent;t.each(t.browser,function(e){t.browser[e]=new RegExp(e,"i").test(f)?!0:!1,t.browser.mozilla&&"mozilla"===e&&(t.browser.mozilla=new RegExp("firefox","i").test(f)?!0:!1),t.browser.chrome&&"safari"===e&&(t.browser.safari=!1)})}t(t.bootstrapSortable)});